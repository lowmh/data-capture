Options -MultiViews
RewriteEngine On
RewriteBase /

# Serve static files directly from the build directory
RewriteCond %{REQUEST_URI} ^/static/
RewriteRule ^static/(.*)$ build/static/$1 [L]

# Handle client-side routing for React
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ build/index.html [QSA,L]

# Set caching for static files
<FilesMatch "\.(jpg|jpeg|png|gif|css|js|ico|svg)$">
  Header set Cache-Control "max-age=3600, public"
</FilesMatch>

# Disable caching for dynamic content
<FilesMatch "\.(html|php)$">
  Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
  Header set Pragma "no-cache"
</FilesMatch>